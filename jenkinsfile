pipeline{
    agent none
    stages{
        stage('git retrival'){
            agent {
  label 'Ansible'
}

            steps{
                git branch: 'ansible', credentialsId: 'd35878c4-1821-4902-966b-5785d600c3d3', url: 'https://github.com/srinum0464/projecttest.git'
            }
        }
        stage('Infrastructure Automation'){
            agent {
  label 'AWS-CLI'
}

            steps{
                sh label: '', script: 'python /home/ansible/workspace/Apache-Server Configuration Pipeline/apacheserver.py'
            }
        }
        stage('Hosts file and SSH Authentication'){
            agent {
  label 'Ansible'
}

            steps{
                sh label: '', script: 'python /home/ansible/workspace/Apache-Server Configuration Pipeline/ec2ip.py'
            }
        }
        stage('Apache Installation and HTML download'){
            agent {
  label 'Ansible'
}

            steps{
                sh label: '', script: 'ansible-playbook -i /home/ansible/workspace/Apache-Server Configuration Pipeline/apache.yml'
            }
        }
        
    }
}